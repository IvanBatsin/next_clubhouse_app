import React from 'react';
import styles from './enterPhoneStep.module.scss';
import StepHeader from '../../components/StepHeader';
import WhiteBlock from '../../components/WhiteBlock';
import NumberFormat from 'react-number-format';
import Button from '../../components/Button/Button';
import { useMainContext } from '../../pages';

type InputValueType = {
  formattedValue: string;
  value: string;
}

const EnterPhoneStep: React.FC = () => {
  const [input, setInput] = React.useState<InputValueType>({} as InputValueType);
  const { onNextStep } = useMainContext();

  const nextDisable = !input.formattedValue || input.formattedValue.includes('_');

  return (
    <div className={styles.header}>
      <StepHeader>
        <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik00OTIuMzgxLDEwNC41NDZjLTE5LjY0Ni0yNy4wMzMtNTQuMDUxLTUxLjQzMy05Ni44NzYtNjguNzAzQzM1Mi45MSwxOC42NjcsMzAzLjQ1NCw5LjE2OCwyNTYuMjQ1LDkuMTAxDQoJCQljLTQ3LjIxMy0wLjExOC05Ni43Myw5LjI4My0xMzkuMzg2LDI2LjMyNWMtNDIuOSwxNy4xNDEtNzcuMzg2LDQxLjQzNS05Ny4xMDQsNjguNDA0QzAuODE3LDEyOS43MzItNC42NDEsMTU3LjY1MSwzLjk3LDE4NC41NjkNCgkJCWM1LjU4NywxNy40NjEsMjEuODgyLDI5LjIxMSw0MC41NTgsMjkuMjM4bDYzLjk1MSwwLjA2YzAuMDIyLDAsMC4wNDMsMCwwLjA2NCwwYzEyLjc1Mi0wLjAwMSwyNC43MzMtNS41ODMsMzIuODc1LTE1LjMyMg0KCQkJYzguMDU2LTkuNjM1LDExLjM5Mi0yMi4yMjcsOS4xNTYtMzQuNTQ5Yy0wLjA2Ni0wLjM2Mi0wLjE0NS0wLjcyMS0wLjIzNi0xLjA3OGwtMy4zNjUtMTMuMDgyDQoJCQljMTguNjM0LTguODkxLDYwLjg1NC0yNi4wNjksMTA5LjA3NS0yNS43OTZjNDguMTg2LDAuMjQ3LDkwLjM3NywxNy40MTUsMTA5LjAzMywyNi4zMWwtMy40MTksMTMuMDA4DQoJCQljLTAuMDk3LDAuMzY5LTAuMTgsMC43MzktMC4yNDgsMS4xMTJjLTIuMjcxLDEyLjMxNSwxLjAzLDI0LjkxNiw5LjA1NywzNC41NzRjOC4xMjksOS43OCwyMC4xMTgsMTUuMzk4LDMyLjkwMywxNS40MTcNCgkJCWw2My45NTEsMC4wNmMwLjAyMiwwLDAuMDQzLDAsMC4wNjQsMGMxOC42NDEtMC4wMDEsMzQuOTQxLTExLjY5Niw0MC41NjktMjkuMTIxQzUxNi42NTEsMTU4LjQ4OSw1MTEuMjY1LDEzMC41MzEsNDkyLjM4MSwxMDQuNTQ2DQoJCQl6Ii8+DQoJPC9nPg0KPC9nPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik00MDAuNTk2LDI3OS44MDdsLTQ3LjY5LTUwLjA3NWMtMi44ODQtMy4wMjgtNi44ODItNC43NDEtMTEuMDYzLTQuNzQxaC0zMC44MnYtMjAuODIzYzAtOC40MzctNi44NC0xNS4yNzgtMTUuMjc4LTE1LjI3OA0KCQkJYy04LjQzOCwwLTE1LjI3OCw2Ljg0LTE1LjI3OCwxNS4yNzh2MjAuODIzaC00OC45MjJ2LTIwLjgyM2MwLTguNDM3LTYuODQtMTUuMjc4LTE1LjI3OC0xNS4yNzhzLTE1LjI3OCw2Ljg0LTE1LjI3OCwxNS4yNzgNCgkJCXYyMC44MjNoLTMwLjgxOWMtNC4xODEsMC04LjE4LDEuNzE0LTExLjA2Myw0Ljc0MWwtNDcuNjksNTAuMDc1Yy0zNy4zOTIsMzkuMjYyLTU3Ljk4NSw5MC43NDQtNTcuOTg1LDE0NC45NjJ2NjIuODUzDQoJCQljMCw4LjQzOCw2Ljg0LDE1LjI3OCwxNS4yNzgsMTUuMjc4aDM3NC41OTJjOC40MzgsMCwxNS4yNzgtNi44NCwxNS4yNzgtMTUuMjc4di02Mi44NTMNCgkJCUM0NTguNTgxLDM3MC41NTEsNDM3Ljk4OCwzMTkuMDcsNDAwLjU5NiwyNzkuODA3eiBNMjU2LjAwNiw0NDcuMDU0Yy00NC4wOSwwLTc5Ljk1OS0zNS44Ny03OS45NTktNzkuOTYNCgkJCWMwLTQ0LjA4OSwzNS44Ny03OS45NTksNzkuOTU5LTc5Ljk1OXM3OS45NTksMzUuODcsNzkuOTU5LDc5Ljk1OUMzMzUuOTY1LDQxMS4xODQsMzAwLjA5NSw0NDcuMDU0LDI1Ni4wMDYsNDQ3LjA1NHoiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCgk8Zz4NCgkJPHBhdGggZD0iTTI1Ni4wMDYsMzE3LjY5MWMtMjcuMjQyLDAtNDkuNDAzLDIyLjE2Mi00OS40MDMsNDkuNDAzYzAsMjcuMjQyLDIyLjE2Miw0OS40MDQsNDkuNDAzLDQ5LjQwNA0KCQkJczQ5LjQwMy0yMi4xNjIsNDkuNDAzLTQ5LjQwNEMzMDUuNDA5LDMzOS44NTQsMjgzLjI0NywzMTcuNjkxLDI1Ni4wMDYsMzE3LjY5MXoiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==" />
        <h4>Enter your phone #</h4>
        <span>We will send you a confirmation code</span>
      </StepHeader>
      <WhiteBlock>
        <div className={styles.input_block}>
          <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQ5NiA0OTYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ5NiA0OTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIHN0eWxlPSJmaWxsOiNFNzNCMzY7IiBkPSJNMCwzMDR2NjUuNkMwLDM5Ni44LDIxLjYsNDE2LDQ4LDQxNmg0MDBjMjYuNCwwLDQ4LTE5LjIsNDgtNDYuNFYzMDRIMHoiLz4NCjxwYXRoIHN0eWxlPSJmaWxsOiNGMEY3RjY7IiBkPSJNNDQ4LDgwSDQ4QzIxLjYsODAsMCw5OS4yLDAsMTI2LjRWMTkyaDQ5NnYtNjUuNkM0OTYsOTkuMiw0NzQuNCw4MCw0NDgsODB6Ii8+DQo8cmVjdCB5PSIxOTIiIHN0eWxlPSJmaWxsOiMzNzU3QTY7IiB3aWR0aD0iNDk2IiBoZWlnaHQ9IjExMiIvPg0KPHBhdGggc3R5bGU9ImZpbGw6I0QzMUMxQzsiIGQ9Ik00NDYuNCw0MTZjMjYuNCwwLDQ5LjYtMTkuMiw0OS42LTQ2LjRWMzA0SDMxNS4yTDQ0Ni40LDQxNnoiLz4NCjxwYXRoIHN0eWxlPSJmaWxsOiNERkYyRUY7IiBkPSJNNDQ4LDgwSDQ4bDEzMi44LDExMkg0OTZ2LTY1LjZDNDk2LDk5LjIsNDc0LjQsODAsNDQ4LDgweiIvPg0KPHBvbHlnb24gc3R5bGU9ImZpbGw6IzIwNDQ4RTsiIHBvaW50cz0iMzE2LDMwNCA0OTYsMzA0IDQ5NiwxOTIgMTgwLDE5MiAiLz4NCjxwYXRoIHN0eWxlPSJmaWxsOiNDQUVBRTQ7IiBkPSJNNDQ4LDgwSDQ4bDM3MC40LDExMkg0OTZ2LTY1LjZDNDk2LDk5LjIsNDc0LjQsODAsNDQ4LDgweiIvPg0KPHBvbHlnb24gc3R5bGU9ImZpbGw6IzEwMzU3NzsiIHBvaW50cz0iNDk2LDIxNC40IDQ5NiwxOTIgNDE0LjQsMTkyICIvPg0KPHBhdGggc3R5bGU9ImZpbGw6I0M0MTAxMDsiIGQ9Ik00OTYsMzY4LjhjMCwyOS42LTIxLjYsNDcuMi00OCw0Ny4ySDQ4Yy0yNi40LDAtNDgtMjAuOC00OC00OCIvPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=" />
          <NumberFormat 
            className="phone"
            format="+# (###) ###-##-##"
            mask="_"
            placeholder="+7 (999) 999-99-99"
            value={input.value}
            onValueChange={({formattedValue, value}) => setInput({formattedValue, value})}
          />
        </div>
        <div className={styles.info}>
          <Button onClick={onNextStep} disabled={nextDisable}>Next &rarr;</Button>
          <p>By entering your number, you're agreeing to our Terms of Service and Privacy Policy. Thanks</p>
        </div>
      </WhiteBlock>
    </div>
  )
}

export default EnterPhoneStep;